package com.ktw.bitbit.util;import android.text.Editable;import android.text.TextUtils;import android.text.TextWatcher;import android.widget.Button;import android.widget.EditText;import android.widget.TextView;import com.ktw.bitbit.util.secure.Money;/** * Created by 魏正旺 on 2016/9/9. * <p> * 用于监听红包和充值的输入字符，检测输入的 * 数字只能是小数点后两位 */public class InputChangeListener implements TextWatcher {    private EditText editRecharge;    private TextView textView;    private Button button;    public InputChangeListener(EditText editRecharge, TextView textView, Button button) {        this.editRecharge = editRecharge;        this.textView = textView;        this.button = button;        setResult("0.0");    }    public InputChangeListener(EditText editRecharge, Button button) {        this.editRecharge = editRecharge;        this.button = button;    }    @Override    public void beforeTextChanged(CharSequence s, int start, int count, int after) {    }    @Override    public void onTextChanged(CharSequence s, int start, int before, int count) {        if (s.toString().contains(".")) {            if (s.length() - 1 - s.toString().indexOf(".") > 2) {                s = s.toString().subSequence(0,                        s.toString().indexOf(".") + 3);                editRecharge.setText(s);                editRecharge.setSelection(s.length());            }        }        if (!TextUtils.isEmpty(s) && s.toString().trim().substring(0, 1).equals(".")) {            s = "0" + s;            editRecharge.setText(s);            editRecharge.setSelection(1);        }        if (s.toString().startsWith("0")                && s.toString().trim().length() > 1) {            if (!s.toString().substring(1, 2).equals(".")) {                editRecharge.setText(s.subSequence(0, 1));                editRecharge.setSelection(1);            }        }    }    @Override    public void afterTextChanged(Editable s) {        // TODO Auto-generated method stub        if (TextUtils.isEmpty(editRecharge.getText().toString().trim())) {            setResult("0.0");            button.setAlpha(0.6f);            button.setEnabled(false);        } else {            setResult(editRecharge.getText().toString().trim());            button.setAlpha(1f);            button.setEnabled(true);        }    }    private void setResult(CharSequence s) {        if (textView != null)            textView.setText(Money.fromBigDecimaltoString(s.toString()));    }}